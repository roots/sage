/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- *//* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: *//* Copyright 2012 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//* globals VBArray */"use strict";(function(){function t(e,t){return new r(this.slice(e,t))}function n(e,t){arguments.length<2&&(t=0);for(var n=0,r=e.length;n<r;++n,++t)this[t]=e[n]&255}function r(e){var r;if(typeof e=="number"){r=[];for(var i=0;i<e;++i)r[i]=0}else if("slice"in e)r=e.slice(0);else{r=[];for(var i=0,s=e.length;i<s;++i)r[i]=e[i]}r.subarray=t;r.buffer=r;r.byteLength=r.length;r.set=n;typeof e=="object"&&e.buffer&&(r.buffer=e.buffer);return r}if(typeof Uint8Array!="undefined"){if(typeof Uint8Array.prototype.subarray=="undefined"){Uint8Array.prototype.subarray=function(t,n){return new Uint8Array(this.slice(t,n))};Float32Array.prototype.subarray=function(t,n){return new Float32Array(this.slice(t,n))}}typeof Float64Array=="undefined"&&(window.Float64Array=Float32Array);return}window.Uint8Array=r;window.Uint32Array=r;window.Int32Array=r;window.Uint16Array=r;window.Float32Array=r;window.Float64Array=r})();(function(){if(typeof Object.create!="undefined")return;Object.create=function(t){function n(){}n.prototype=t;return new n}})();(function(){if(typeof Object.defineProperty!="undefined"){var t=!0;try{Object.defineProperty(new Image,"id",{value:"test"});var n=function(){};n.prototype={get id(){}};Object.defineProperty(new n,"id",{value:"",configurable:!0,enumerable:!0,writable:!1})}catch(r){t=!1}if(t)return}Object.defineProperty=function(t,n,r){delete t[n];"get"in r&&t.__defineGetter__(n,r.get);"set"in r&&t.__defineSetter__(n,r.set);if("value"in r){t.__defineSetter__(n,function(t){this.__defineGetter__(n,function(){return t});return t});t[n]=r.value}}})();(function(){if(typeof Object.keys!="undefined")return;Object.keys=function(t){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(r);return n}})();(function(){if(typeof FileReader=="undefined")return;var t=FileReader.prototype;if("readAsArrayBuffer"in t)return;Object.defineProperty(t,"readAsArrayBuffer",{value:function(t){var n=new FileReader,r=this;n.onload=function(t){var n=t.target.result,i=new ArrayBuffer(n.length),s=new Uint8Array(i);for(var o=0,u=n.length;o<u;o++)s[o]=n.charCodeAt(o);Object.defineProperty(r,"result",{value:i,enumerable:!0,writable:!1,configurable:!0});var a=document.createEvent("HTMLEvents");a.initEvent("load",!1,!1);r.dispatchEvent(a)};n.readAsBinaryString(t)}})})();(function(){function n(){this.overrideMimeType("text/plain; charset=x-user-defined")}function r(){var e=this.responseText,t,n=e.length,r=new Uint8Array(n);for(t=0;t<n;++t)r[t]=e.charCodeAt(t)&255;return r}var t=XMLHttpRequest.prototype;"overrideMimeType"in t||Object.defineProperty(t,"overrideMimeType",{value:function(t){}});if("response"in t||"mozResponseArrayBuffer"in t||"mozResponse"in t||"responseArrayBuffer"in t)return;if(typeof VBArray!="undefined"){Object.defineProperty(t,"response",{get:function(){return new Uint8Array((new VBArray(this.responseBody)).toArray())}});return}typeof t.overrideMimeType=="function"&&Object.defineProperty(t,"responseType",{set:n});Object.defineProperty(t,"response",{get:r})})();(function(){if("btoa"in window)return;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";window.btoa=function(n){var r="",i,s;for(i=0,s=n.length;i<s;i+=3){var o=n.charCodeAt(i)&255,u=n.charCodeAt(i+1)&255,a=n.charCodeAt(i+2)&255,f=o>>2,l=(o&3)<<4|u>>4,c=i+1<s?(u&15)<<2|a>>6:64,h=i+2<s?a&63:64;r+=t.charAt(f)+t.charAt(l)+t.charAt(c)+t.charAt(h)}return r}})();(function(){if(typeof Function.prototype.bind!="undefined")return;Function.prototype.bind=function(t){var n=this,r=Array.prototype.slice.call(arguments,1),i=function(){var i=Array.prototype.concat.apply(r,arguments);return n.apply(t,i)};return i}})();(function(){if(!("documentMode"in document)||document.documentMode!==9&&document.documentMode!==10)return;var t=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,"src");Object.defineProperty(HTMLIFrameElement.prototype,"src",{get:function(){return this.$src},set:function(n){this.$src=n;if(n.substr(0,14)!="data:text/html"){t.set.call(this,n);return}t.set.call(this,"about:blank");setTimeout(function(){var t=this.contentDocument;t.open("text/html");t.write(n.substr(n.indexOf(",")+1));t.close()}.bind(this),0)},enumerable:!0})})();(function(){var t=document.createElement("div");if("dataset"in t)return;Object.defineProperty(HTMLElement.prototype,"dataset",{get:function(){if(this._dataset)return this._dataset;var e={};for(var t=0,n=this.attributes.length;t<n;t++){var r=this.attributes[t];if(r.name.substring(0,5)!="data-")continue;var i=r.name.substring(5).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()});e[i]=r.value}Object.defineProperty(this,"_dataset",{value:e,writable:!1,enumerable:!1});return e},enumerable:!0})})();(function(){function n(e,t,n,r){var i=e.className||"",s=i.split(/\s+/g);s[0]===""&&s.shift();var o=s.indexOf(t);o<0&&n&&s.push(t);o>=0&&r&&s.splice(o,1);e.className=s.join(" ")}var t=document.createElement("div");if("classList"in t)return;var r={add:function(e){n(this.element,e,!0,!1)},remove:function(e){n(this.element,e,!1,!0)},toggle:function(e){n(this.element,e,!0,!0)}};Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){if(this._classList)return this._classList;var e=Object.create(r,{element:{value:this,writable:!1,enumerable:!0}});Object.defineProperty(this,"_classList",{value:e,writable:!1,enumerable:!1});return e},enumerable:!0})})();(function(){if("console"in window){if(!("bind"in console.log)){console.log=function(e){return function(t){return e(t)}}(console.log);console.error=function(e){return function(t){return e(t)}}(console.error)}}else window.console={log:function(){},error:function(){}}})();(function(){function t(e){n(e.target)&&e.stopPropagation()}function n(e){return e.disabled||e.parentNode&&n(e.parentNode)}navigator.userAgent.indexOf("Opera")!=-1&&document.addEventListener("click",t,!0)})();(function(){if("language"in navigator)return;Object.defineProperty(navigator,"language",{get:function(){var t=navigator.userLanguage||"en-US";return t.substring(0,2).toLowerCase()+t.substring(2).toUpperCase()},enumerable:!0})})();