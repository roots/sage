/* global redux_change, wp */(function(e){"use strict";e.gallery=e.gallery||{};e(document).ready(function(){e.gallery()});e.gallery=function(){e("body").on({click:function(t){var n=e(this).closest("fieldset");if(t.currentTarget.id==="clear-gallery"){var r=n.find(".gallery_values").val("");n.find(".screenshot").html("");return}if(typeof wp=="undefined"||!wp.media||!wp.media.gallery)return;t.preventDefault();var i=e(this),s=n.find(".gallery_values").val(),o;s?o='[gallery ids="'+s+'"]':o='[gallery ids="0"]';var u=wp.media.gallery.edit(o);u.state("gallery-edit").on("update",function(e){n.find(".screenshot").html("");var t,r="",i,s=e.models.map(function(e){t=e.toJSON();i=typeof t.sizes.thumbnail!="undefined"?t.sizes.thumbnail.url:t.url;r="<a class='of-uploaded-image' href='"+i+"'><img class='redux-option-image' src='"+i+"' alt='' /></a>";n.find(".screenshot").append(r);return e.id});n.find(".gallery_values").val(s.join(","))});return!1}},".gallery-attachments")}})(jQuery);